<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connexion - Craftpick Network</title>
<style>
/* ====== Reset & Base ====== */
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:2rem;}
a{color:inherit;text-decoration:none;}

/* ====== Container ====== */
.auth-container{background:rgba(0,0,0,0.4);backdrop-filter:blur(20px);border-radius:20px;padding:3rem;max-width:450px;width:100%;box-shadow:0 20px 60px rgba(0,0,0,0.5);animation:fadeIn 0.5s;}
.logo{text-align:center;margin-bottom:2rem;}
.logo h1{font-size:2rem;background:linear-gradient(45deg,#ffd700,#ffed4e);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:0.5rem;}
.logo p{opacity:0.8;font-size:0.9rem;}

/* ====== Tabs ====== */
.tabs{display:flex;margin-bottom:2rem;background:rgba(255,255,255,0.1);border-radius:10px;padding:0.3rem;}
.tab{flex:1;padding:0.8rem;text-align:center;border-radius:8px;cursor:pointer;transition:all 0.3s;font-weight:bold;}
.tab.active{background:linear-gradient(45deg,#ff6b6b,#ee5a6f);}

/* ====== Forms ====== */
.form-container{display:none;}
.form-container.active{display:block;animation:slideIn 0.3s;}
.form-group{margin-bottom:1.5rem;}
.form-group label{display:block;margin-bottom:0.5rem;color:#ffd700;font-weight:bold;}
.form-group input{width:100%;padding:1rem;border:2px solid rgba(255,255,255,0.2);border-radius:10px;background:rgba(255,255,255,0.1);color:#fff;font-size:1rem;transition:all 0.3s;}
.form-group input:focus{outline:none;border-color:#ffd700;background:rgba(255,255,255,0.15);}
.form-group input::placeholder{color:rgba(255,255,255,0.5);}

.btn-submit{width:100%;padding:1rem;border:none;border-radius:10px;background:linear-gradient(45deg,#4CAF50,#45a049);color:white;font-size:1.1rem;font-weight:bold;cursor:pointer;transition:all 0.3s;margin-top:1rem;}
.btn-submit:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(76,175,80,0.4);}
.btn-submit:active{transform:translateY(0);}

.btn-discord{width:100%;padding:1rem;border:none;border-radius:10px;background:linear-gradient(45deg,#5865F2,#4752C4);color:white;font-size:1.1rem;font-weight:bold;cursor:pointer;transition:all 0.3s;display:flex;align-items:center;justify-content:center;gap:0.5rem;}
.btn-discord:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(88,101,242,0.4);}
.btn-discord:active{transform:translateY(0);}

.back-link{text-align:center;margin-top:2rem;}
.back-link a{color:#ffd700;text-decoration:none;font-weight:bold;transition:all 0.3s;}
.back-link a:hover{opacity:0.8;}

.error-message{background:rgba(255,107,107,0.3);border-left:4px solid #ff6b6b;padding:0.8rem;border-radius:8px;margin-bottom:1rem;display:none;}
.success-message{background:rgba(76,175,80,0.3);border-left:4px solid #4CAF50;padding:0.8rem;border-radius:8px;margin-bottom:1rem;display:none;}

/* ====== Password Strength ====== */
.password-strength{height:4px;background:rgba(255,255,255,0.2);border-radius:2px;margin-top:0.5rem;overflow:hidden;}
.password-strength-bar{height:100%;width:0;transition:all 0.3s;}
.strength-weak{background:#ff6b6b;width:33%;}
.strength-medium{background:#ffd700;width:66%;}
.strength-strong{background:#4CAF50;width:100%;}

/* ====== Notifications ====== */
.notification{position:fixed;top:20px;right:20px;background:rgba(0,0,0,0.9);padding:1rem 1.5rem;border-radius:10px;box-shadow:0 5px 20px rgba(0,0,0,0.3);z-index:2000;animation:slideInRight 0.3s;}
.notification.success{border-left:4px solid #4CAF50;}
.notification.error{border-left:4px solid #ff6b6b;}

/* ====== Animations ====== */
@keyframes fadeIn{from{opacity:0;transform:scale(0.9);}to{opacity:1;transform:scale(1);}}
@keyframes slideIn{from{opacity:0;transform:translateX(-20px);}to{opacity:1;transform:translateX(0);}}
@keyframes slideInRight{from{transform:translateX(100%);}to{transform:translateX(0);}}
</style>
</head>
<body>
<div class="auth-container">
<div class="logo">
<h1>‚õèÔ∏è CRAFTPICK NETWORK</h1>
<p>Version 1.8.8 - craftpick.fr</p>
</div>

<div class="tabs">
<div class="tab active" onclick="switchTab('login')">Connexion</div>
<div class="tab" onclick="switchTab('register')">Inscription</div>
</div>

<!-- Connexion -->
<div id="loginForm" class="form-container active">
<div id="loginError" class="error-message"></div>
<form onsubmit="handleLogin(event)">
<div class="form-group">
<label for="loginUsername">Pseudo</label>
<input type="text" id="loginUsername" placeholder="Votre pseudo Minecraft" required>
</div>
<div class="form-group">
<label for="loginPassword">Mot de passe</label>
<input type="password" id="loginPassword" placeholder="Votre mot de passe" required>
</div>
<button type="submit" class="btn-submit">üéÆ Se Connecter</button>
</form>
<div style="text-align:center;margin:1.5rem 0;opacity:0.7;">- OU -</div>
<button class="btn-discord" onclick="loginWithDiscord()"><span style="font-size:1.2rem;">üí¨</span> Se connecter avec Discord</button>
</div>

<!-- Inscription -->
<div id="registerForm" class="form-container">
<div id="registerError" class="error-message"></div>
<div id="registerSuccess" class="success-message"></div>
<form onsubmit="handleRegister(event)">
<div class="form-group">
<label for="registerUsername">Pseudo</label>
<input type="text" id="registerUsername" placeholder="Votre pseudo Minecraft" required minlength="3" maxlength="16">
</div>
<div class="form-group">
<label for="registerEmail">Email (optionnel)</label>
<input type="email" id="registerEmail" placeholder="votre@email.com">
</div>
<div class="form-group">
<label for="registerPassword">Mot de passe</label>
<input type="password" id="registerPassword" placeholder="Minimum 6 caract√®res" required minlength="6" oninput="checkPasswordStrength()">
<div class="password-strength">
<div id="strengthBar" class="password-strength-bar"></div>
</div>
</div>
<div class="form-group">
<label for="registerPasswordConfirm">Confirmer le mot de passe</label>
<input type="password" id="registerPasswordConfirm" placeholder="R√©p√©tez votre mot de passe" required>
</div>
<button type="submit" class="btn-submit">‚ú® Cr√©er un compte</button>
</form>
</div>

<div class="back-link">
<a href="index.html">‚Üê Retour √† l'accueil</a>
</div>
</div>

<script>
/* ====== Tabs ====== */
function switchTab(tab){
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.form-container').forEach(f=>f.classList.remove('active'));
    if(tab==='login'){
        document.querySelectorAll('.tab')[0].classList.add('active');
        document.getElementById('loginForm').classList.add('active');
    } else {
        document.querySelectorAll('.tab')[1].classList.add('active');
        document.getElementById('registerForm').classList.add('active');
    }
    hideError('loginError'); hideError('registerError'); hideError('registerSuccess');
}

/* ====== Password Strength ====== */
function checkPasswordStrength(){
    const pwd=document.getElementById('registerPassword').value;
    const bar=document.getElementById('strengthBar');
    let s=0;if(pwd.length>=6)s++;if(pwd.length>=10)s++;if(/[a-z]/.test(pwd)&&/[A-Z]/.test(pwd))s++;if(/[0-9]/.test(pwd))s++;if(/[^a-zA-Z0-9]/.test(pwd))s++;
    bar.className='password-strength-bar';
    if(s<=2)bar.classList.add('strength-weak');
    else if(s<=4)bar.classList.add('strength-medium');
    else bar.classList.add('strength-strong');
}

/* ====== Notifications ====== */
function showNotification(msg,type='info'){
    const n=document.createElement('div');
    n.className=`notification ${type}`;
    n.textContent=msg;
    document.body.appendChild(n);
    setTimeout(()=>{n.remove()},3000);
}

/* ====== Error Utils ====== */
function showError(id,msg){const e=document.getElementById(id);e.textContent=msg;e.style.display='block';}
function hideError(id){const e=document.getElementById(id);e.style.display='none';}

/* ====== Login ====== */
function handleLogin(e){
    e.preventDefault();
    const u=document.getElementById('loginUsername').value.trim();
    const p=document.getElementById('loginPassword').value;
    if(u.length<3){showError('loginError','Le pseudo doit contenir au moins 3 caract√®res');return;}
    if(p.length<6){showError('loginError','Mot de passe doit contenir 6 caract√®res minimum');return;}
    const users=JSON.parse(localStorage.getItem('craftpickUsers')||'{}');
    if(!users[u]){showError('loginError','Ce pseudo n\'existe pas');return;}
    if(users[u].password!==p){showError('loginError','Mot de passe incorrect');return;}
    localStorage.setItem('craftpickUser',JSON.stringify({pseudo:u,email:users[u].email||'',loginDate:new Date().toISOString()}));
    showNotification('Connexion r√©ussie ! Redirection...','success');
    setTimeout(()=>{window.location.href='index.html'},1500);
}

/* ====== Register ====== */
function handleRegister(e){
    e.preventDefault();
    const u=document.getElementById('registerUsername').value.trim();
    const em=document.getElementById('registerEmail').value.trim();
    const p=document.getElementById('registerPassword').value;
    const pc=document.getElementById('registerPasswordConfirm').value;
    if(u.length<3||u.length>16){showError('registerError','Pseudo 3-16 caract√®res');return;}
    if(!/^[a-zA-Z0-9_]+$/.test(u)){showError('registerError','Pseudo lettres, chiffres ou _ seulement');return;}
    if(p.length<6){showError('registerError','Mot de passe doit contenir au moins 6 caract√®res');return;}
    if(p!==pc){showError('registerError','Les mots de passe ne correspondent pas');return;}
    const users=JSON.parse(localStorage.getItem('craftpickUsers')||'{}');
    if(users[u]){showError('registerError','Pseudo d√©j√† utilis√©');return;}
    users[u]={password:p,email:em,registerDate:new Date().toISOString()};
    localStorage.setItem('craftpickUsers',JSON.stringify(users));
    localStorage.setItem('craftpickUser',JSON.stringify({pseudo:u,email:em,loginDate:new Date().toISOString()}));
    hideError('registerError');
    showNotification('Inscription r√©ussie ! Bienvenue sur Craftpick Network ! üéâ','success');
    setTimeout(()=>{window.location.href='index.html'},2000);
}

/* ====== Discord OAuth2 Simul√© ====== */
function loginWithDiscord(){
    showNotification('Redirection vers Discord...','info');
    const userData={pseudo:'DiscordUser#1234',email:'user@discord.com',loginDate:new Date().toISOString(),provider:'discord'};
    localStorage.setItem('craftpickUser',JSON.stringify(userData));
    setTimeout(()=>{window.location.href='index.html'},1500);
}

/* ====== Auto redirect if logged in ====== */
document.addEventListener('DOMContentLoaded',()=>{
    const u=JSON.parse(localStorage.getItem('craftpickUser'));
    if(u){showNotification('Vous √™tes d√©j√† connect√© !','success');setTimeout(()=>{window.location.href='index.html'},1500);}
});
</script>
</body>
</html>
